<html>
<body>

<title>
Exercise Set #5 Solutions
</title>

<font face="verdana" size=-1>

<b>Exercise 1</b>.

The following query retrieves all students each of whom has at least two other students
with the same last name:

<br><br>

Unbound variables: s2: Student, s3: Student

</font>

<pre>
{ s1: Student | s1.name.lastName == s2.name.lastName &&
                s2.name.lastName == s3.name.lastName &&
                s1 != s2 && s2 != s3 && s3 != s1  }
</pre>

<font face="verdana" size=-1>

<ol>
<li>
 What would be the result of the query if the condition "s1 != s2" were omitted?
 What if "s2 != s3" or "s3 != s1" were omitted?
</font>
 <br>
 <font color=blue>
 In each of the three cases the result would be the collection of all students each of whom has at least one
 other student with the same last name.
 If "s1 != s2" were omitted, &exist;s2:Student (s1.name.lastName == s2.name.lastName) is trivially
 satisfied by choosing s2 == s1, hence the logical meaning of the query reduces to:
 <pre>
 { s1: Student | &exist;s3:Student
                 (s1.name.lastName == s3.name.lastName &&
                  s1 != s3 && s3 != s1)  }
 </pre>
 Likewise for the other two cases.
 </font>
<font face="verdana" size=-1>
<li>
 What would be the result of the query if the condition "s1 != s2 && s2 != s3" were omitted?
</font>
 <br>
 <font color=blue>
 The result would be identical to the one for the above question.
 The reason is that
 s2 and s3 can be chosen so that s1 == s2 or s2 == s3 but not both due to the remaining condition s3 != s1.
 </font>
<font face="verdana" size=-1>
</ol>

<b>Exercise 2</b>.

Consider the following JDO class definitions.

</font>

<pre>
Class Book                                   Class Publisher
{ String title;                              { String name; // key attribute 
  HashSet&lt;Author&gt; writtenBy;                   HashSet&lt;Book&gt; published;
  Publisher publishedBy;                     }
    // the inverse of Publisher.published
}

Class Author
{ String authorID; // key attribute
  HashSet&lt;Book&gt; wrote; // the inverse of Book.writtenBy
}
</pre>

<font face="verdana" size=-1>

Note: The relation "an author wrote a book" includes cases where
an author co-wrote a book with other authors; likewise for the inverse
relation <i>writtenBy</i>.

<br><br>

For each of the following descriptions of queries pertaining to the above
classes, give a JDOQL query in set form.
If necessary, use suitable bound and/or unbound variables, and specify
the bound/unbound variables used along with their types;
also, give the logical interpretation of the query using exis